# Turn bedroom lights on 100% when Flic button single pressed
- alias: Flic bedroom lights on
  initial_state: on
  trigger:
  - event_data:
      button_name: !secret flic_bedroom
      click_type: single
    event_type: flic_click
    platform: event
  condition: []
  action:
  - data:
      entity_id: light.bedroom
      brightness_pct: 100
    service: light.turn_on
# Turn bedroom lights off when Flic button long pressed
- alias: Flic bedroom lights off
  initial_state: on
  trigger:
  - event_data:
      button_name: !secret flic_bedroom
      click_type: hold
    event_type: flic_click
    platform: event
  condition: []
  action:
  - data:
      entity_id: light.bedroom
    service: light.turn_off
# Turn bedroom lights down when Flic button double pressed
- alias: Flic bedroom nightlight
  initial_state: on
  trigger:
  - event_data:
      button_name: !secret flic_bedroom
      click_type: double
    event_type: flic_click
    platform: event
  condition: []
  action:
  - data:
      entity_id: light.desk, light.wall
    service: light.turn_off
  - data:
      entity_id: light.ceiling
      brightness_pct: 1
    service: light.turn_on
# Turn on porch light when arriving home if sun down
- alias: Porch light on
  initial_state: on
  trigger:
    platform: state
    entity_id: binary_sensor.my_presence
    to: 'on'
  condition:
    condition: or
    conditions:
      - condition: sun
        after: sunset
      - condition: sun
        before: sunrise
      - condition: state
        entity_id: 'light.porch'
        state: 'off'
  action:
  - data:
      entity_id: light.porch
    service: light.turn_on
  # temp - for debug
  - data:
      message: "Porch light turned on"
    service: notify.telegram
